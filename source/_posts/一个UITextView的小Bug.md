---
title: iOS:ä¸€ä¸ªUITextViewçš„å°Bug
date: 2016-07-28 14:55:25
tags:
- iOS
- UITextView
categories:
- å¼€å‘
- iOS
---

# èµ·å› 

ä»Šå¤©ä¸Šåˆæµ‹è¯•æäº†ä¸€ä¸ªå¾ˆç¥žå¥‡çš„Bugï¼Œåœ¨è¾“å…¥æ¡†è¾“å…¥æŸäº›iOSè‡ªå¸¦çš„è¡¨æƒ…ï¼Œåˆ é™¤åŽä¼šæœ‰æ®‹ç•™ç‰©ã€‚ä¾‹å¦‚ï¼šðŸ’ºðŸ’ºðŸ’ºçœ‹åˆ°è¿™ä¸ªBugï¼Œæˆ‘çš„å†…å¿ƒæ˜¯è§‰å¾—ä¸å¯èƒ½å•Šã€‚ç„¶åŽäº²è‡ªè¯•äº†ä¸€ä¸‹ï¼Œå‘çŽ°çœŸä¼šè¿™æ ·ã€‚è‡³æ­¤ï¼Œæˆ‘å‘è‡ªå†…å¿ƒä½©æœäº†æˆ‘å¸çš„æµ‹è¯•ï¼Œè¿™ç§é—®é¢˜éƒ½èƒ½å‘çŽ°ã€‚

æˆ‘æƒ³ï¼Œè¿™ä»…ä»…å°±æ˜¯ä¸€ä¸ªUITextViewï¼Œåº”è¯¥ä¸ä¼šæˆ‘å†™çš„æ˜¯ä¸ªä¾‹ï¼ŒäºŽæ˜¯ï¼Œæˆ‘æ‰¾äº†å¾®ä¿¡è¯•äº†ä¸€ä¸‹,è¿™æ˜¯å¾®ä¿¡çš„ä¸ªäººç­¾åæ¡†ï¼Œåœ¨è¾“å…¥å®Œè¡¨æƒ…åŽï¼Œå†åˆ é™¤ï¼Œå¯ä»¥çœ‹åˆ°ï¼ŒåŽé¢ç•™äº†ä¸€ä¸²æ®‹ç•™ç‰©ã€‚
![å¾®ä¿¡ä¸ŠBugå¤çŽ°](/uploads/blog/1-1.jpg)
æˆ‘æœ¬æ¥æƒ³ç›´æŽ¥å…³äº†è¿™ä¸ªBugï¼Œæ¯•ç«Ÿå¾®ä¿¡è¿™ç§å¤§åŽ‚çš„Appéƒ½èƒ½å…è®¸è¿™ä¸ªBugã€‚åŽæ¥ä¸€æƒ³ï¼Œä¹Ÿè®¸æ˜¯ä»–ä»¬çš„æµ‹è¯•æ²¡æœ‰æˆ‘ä»¬çš„ç‰›é€¼ã€‚

# è§£å†³æ–¹æ³•

å¾®ä¿¡çš„è¿™ä¸ªBugå¤çŽ°ï¼Œåœ¨ä¿å­˜åŽå†è¿›åŽ»ï¼Œå°±ä¼šå‘çŽ°æ®‹ç•™ç‰©æ²¡æœ‰äº†ã€‚æ‰€ä»¥è§£å†³æ€è·¯æ˜¯ï¼Œåœ¨UITextViewä¸€è¾¹è¾“å…¥ï¼Œä¸€è¾¹ç»™å®ƒèµ‹å€¼ã€‚äºŽæ˜¯å®žçŽ°äº†`UITextViewDelegate`çš„`textViewDidChange`æ–¹æ³•ã€‚

``` swift
extension FMPersonEditSignVC : UITextViewDelegate {
    
    func textViewDidChange(textView:UITextView) {
        self.textView.text = textView.text
    } 
}
```

# ç•ªå¤–ç¯‡

è¯´åˆ°`UITextViewDelegate`ï¼Œæˆ‘åˆæƒ³èµ·æ¥ä¹‹å‰æçš„ä¸€ä¸ªBugã€‚æˆ‘ä»¬çš„baseVCä¸­éƒ½åŠ äº†ç‚¹å‡»ç©ºç™½é¡µéšè—é”®ç›˜çš„åŠŸèƒ½ï¼Œä½†æ˜¯åœ¨æŸäº›å°å±å¹•æœºåž‹ä¸­ï¼Œæ¯”å¦‚iPhone5ä¸Šï¼Œå¦‚æžœUITextViewçš„é«˜åº¦è®¾ç½®çš„æ¯”è¾ƒé«˜ï¼Œç”¨æˆ·å°±ç‚¹å‡»ä¸åˆ°ç©ºç™½é¡µï¼ˆæˆ‘å½“æ—¶ç»™æµ‹è¯•æ¼”ç¤ºï¼Œç”¨é¼ æ ‡ç‚¹å‡»çš„ï¼Œæˆ‘è¯´è¿™å¾ˆå¥½ç‚¹å•Šï¼Œå“ˆå“ˆå“ˆå“ˆï¼‰ï¼Œè¿›è€Œå°±éšè—ä¸äº†é”®ç›˜ã€‚

è¿™é‡Œå¦‚æžœåŽ»é‡æ–°ç”»UIè®¾ç½®çº¦æŸï¼Œæˆ‘æ„Ÿè§‰åŠ³åŠ¨é‡å¤ªå¤§äº†ï¼ŒäºŽæ˜¯å°±æƒ³ç€ç”¨æˆ·åœ¨è¾“å…¥å®Œå›žè½¦é”®å¯ä»¥éšè—é”®ç›˜ã€‚å¦å¤–ï¼ŒiOSçš„é”®ç›˜çš„å›žè½¦é”®æ˜¯å¯ä»¥è‡ªå®šä¹‰è®¾ç½®çš„ï¼Œæˆ‘å°†Return Keyè®¾ç½®æ˜¾ç¤ºä¸ºâ€œDoneâ€ï¼Œæ›´ä¾¿äºŽç”¨æˆ·ç†è§£ã€‚

æ£€æµ‹ç”¨æˆ·è¾“å…¥å›žè½¦çš„ä»£ç å¦‚ä¸‹ï¼š

``` swift 
extension FMPersonEditSignVC : UITextViewDelegate {
    
    func textView(textView: UITextView, shouldChangeTextInRange range: NSRange, replacementText text: String) -> Bool {
        if text == "\n" {
            textView.resignFirstResponder()
            return false
        }
        return true
    }
}

```

