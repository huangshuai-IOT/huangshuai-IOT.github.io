<!doctype html>



  


<html class="theme-next muse use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Swift,Alamofire,Today-Extension," />





  <link rel="alternate" href="/atom.xml" title="é»„å¸…çš„åšå®¢" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="èƒŒæ™¯9.15å·ä¸­ç§‹èŠ‚é‚£å¤©å‘å¸ƒäº†å¸ˆå¤§åŠ©æ‰‹Appåï¼Œå°±åœ¨æƒ³è¿˜åŠ ç‚¹ä»€ä¹ˆåŠŸèƒ½ã€‚åæ¥æƒ³åˆ°äº†å¯ä»¥åœ¨ Today Widgets é‡Œé¢åŠ ä¸€ä¸ªä»Šæ—¥è¯¾ç¨‹ï¼Œäºæ˜¯å°±å¼€å§‹åŠ¨æ‰‹åšäº†ã€‚å…ˆç»™å¤§å®¶çœ‹ä¸€ä¸‹æœ€ç»ˆæ•ˆæœï¼šä¸€å¼€å§‹å¼€å‘çš„æ—¶å€™ï¼Œè¿˜æ˜¯ Xcode7 å’Œ Swift2 ï¼Œç­‰åˆ°å‡†å¤‡ä¸Šæ¶å®¡æ ¸çš„æ—¶å€™ï¼ŒXcode8 æ­£å¼ç‰ˆå‘å¸ƒäº†ï¼Œç„¶åå°±åšäº† Swift3 è¿ç§»å’Œ iOS10 é€‚é…ã€‚
æ­¥éª¤Part1 åŸºæœ¬æ­å»º
æ–°å»º iOS Project">
<meta property="og:type" content="article">
<meta property="og:title" content="iOS10 Today Extension å¼€å‘å°ç»“ ">
<meta property="og:url" content="https://huangshuai-iot.github.io/2016/10/11/iOS10-Today-Extension-å¼€å‘å°ç»“/index.html">
<meta property="og:site_name" content="é»„å¸…çš„åšå®¢">
<meta property="og:description" content="èƒŒæ™¯9.15å·ä¸­ç§‹èŠ‚é‚£å¤©å‘å¸ƒäº†å¸ˆå¤§åŠ©æ‰‹Appåï¼Œå°±åœ¨æƒ³è¿˜åŠ ç‚¹ä»€ä¹ˆåŠŸèƒ½ã€‚åæ¥æƒ³åˆ°äº†å¯ä»¥åœ¨ Today Widgets é‡Œé¢åŠ ä¸€ä¸ªä»Šæ—¥è¯¾ç¨‹ï¼Œäºæ˜¯å°±å¼€å§‹åŠ¨æ‰‹åšäº†ã€‚å…ˆç»™å¤§å®¶çœ‹ä¸€ä¸‹æœ€ç»ˆæ•ˆæœï¼šä¸€å¼€å§‹å¼€å‘çš„æ—¶å€™ï¼Œè¿˜æ˜¯ Xcode7 å’Œ Swift2 ï¼Œç­‰åˆ°å‡†å¤‡ä¸Šæ¶å®¡æ ¸çš„æ—¶å€™ï¼ŒXcode8 æ­£å¼ç‰ˆå‘å¸ƒäº†ï¼Œç„¶åå°±åšäº† Swift3 è¿ç§»å’Œ iOS10 é€‚é…ã€‚
æ­¥éª¤Part1 åŸºæœ¬æ­å»º
æ–°å»º iOS Project">
<meta property="og:image" content="http://7xqj7o.com1.z0.glb.clouddn.com/blog/Blog_Widgets_1">
<meta property="og:image" content="http://7xqj7o.com1.z0.glb.clouddn.com/blog/Blog_Widgets_2">
<meta property="og:image" content="http://7xqj7o.com1.z0.glb.clouddn.com/blog/Blog_Widgets_3.png">
<meta property="og:updated_time" content="2016-12-29T11:44:48.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="iOS10 Today Extension å¼€å‘å°ç»“ ">
<meta name="twitter:description" content="èƒŒæ™¯9.15å·ä¸­ç§‹èŠ‚é‚£å¤©å‘å¸ƒäº†å¸ˆå¤§åŠ©æ‰‹Appåï¼Œå°±åœ¨æƒ³è¿˜åŠ ç‚¹ä»€ä¹ˆåŠŸèƒ½ã€‚åæ¥æƒ³åˆ°äº†å¯ä»¥åœ¨ Today Widgets é‡Œé¢åŠ ä¸€ä¸ªä»Šæ—¥è¯¾ç¨‹ï¼Œäºæ˜¯å°±å¼€å§‹åŠ¨æ‰‹åšäº†ã€‚å…ˆç»™å¤§å®¶çœ‹ä¸€ä¸‹æœ€ç»ˆæ•ˆæœï¼šä¸€å¼€å§‹å¼€å‘çš„æ—¶å€™ï¼Œè¿˜æ˜¯ Xcode7 å’Œ Swift2 ï¼Œç­‰åˆ°å‡†å¤‡ä¸Šæ¶å®¡æ ¸çš„æ—¶å€™ï¼ŒXcode8 æ­£å¼ç‰ˆå‘å¸ƒäº†ï¼Œç„¶åå°±åšäº† Swift3 è¿ç§»å’Œ iOS10 é€‚é…ã€‚
æ­¥éª¤Part1 åŸºæœ¬æ­å»º
æ–°å»º iOS Project">
<meta name="twitter:image" content="http://7xqj7o.com1.z0.glb.clouddn.com/blog/Blog_Widgets_1">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: 'Author'
    }
  };
</script>




  <link rel="canonical" href="https://huangshuai-iot.github.io/2016/10/11/iOS10-Today-Extension-å¼€å‘å°ç»“/"/>

  <title> iOS10 Today Extension å¼€å‘å°ç»“  | é»„å¸…çš„åšå®¢ </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  



  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?de241358bbb90d3e97f1f8486e6d5b41";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>






  <div style="display: none;">
    <script src="//s6.cnzz.com/stat.php?id=1259995403&web_id=1259995403" type="text/javascript"></script>
  </div>





  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">é»„å¸…çš„åšå®¢</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">Just I decided.</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            åˆ†ç±»
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            æ ‡ç­¾
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            å…³äº
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="st-search-show-outputs">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            æœç´¢
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <form class="site-search-form">
  <input type="text" id="st-search-input" class="st-search-input st-default-search-input" />
</form>

<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
    (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
    e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install', 'yQ1raifaH1s316jSamV8','2.0.0');
</script>



    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                iOS10 Today Extension å¼€å‘å°ç»“ 
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2016-10-11T17:30:20+08:00" content="2016-10-11">
              2016-10-11
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/å¼€å‘/" itemprop="url" rel="index">
                    <span itemprop="name">å¼€å‘</span>
                  </a>
                </span>

                
                
                  ï¼Œ 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/å¼€å‘/iOS/" itemprop="url" rel="index">
                    <span itemprop="name">iOS</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/10/11/iOS10-Today-Extension-å¼€å‘å°ç»“/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/10/11/iOS10-Today-Extension-å¼€å‘å°ç»“/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>9.15å·ä¸­ç§‹èŠ‚é‚£å¤©å‘å¸ƒäº†<a href="https://itunes.apple.com/us/app/shi-da-zhu-shou-hui-shi-fan/id1150983683?l=zh&amp;ls=1&amp;mt=8" target="_blank" rel="external">å¸ˆå¤§åŠ©æ‰‹App</a>åï¼Œå°±åœ¨æƒ³è¿˜åŠ ç‚¹ä»€ä¹ˆåŠŸèƒ½ã€‚åæ¥æƒ³åˆ°äº†å¯ä»¥åœ¨ Today Widgets é‡Œé¢åŠ ä¸€ä¸ªä»Šæ—¥è¯¾ç¨‹ï¼Œäºæ˜¯å°±å¼€å§‹åŠ¨æ‰‹åšäº†ã€‚å…ˆç»™å¤§å®¶çœ‹ä¸€ä¸‹æœ€ç»ˆæ•ˆæœï¼š<br><img src="http://7xqj7o.com1.z0.glb.clouddn.com/blog/Blog_Widgets_1" alt="æœ€ç»ˆæ•ˆæœ"><br>ä¸€å¼€å§‹å¼€å‘çš„æ—¶å€™ï¼Œè¿˜æ˜¯ Xcode7 å’Œ Swift2 ï¼Œç­‰åˆ°å‡†å¤‡ä¸Šæ¶å®¡æ ¸çš„æ—¶å€™ï¼ŒXcode8 æ­£å¼ç‰ˆå‘å¸ƒäº†ï¼Œç„¶åå°±åšäº† Swift3 è¿ç§»å’Œ iOS10 é€‚é…ã€‚</p>
<h2 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h2><h3 id="Part1-åŸºæœ¬æ­å»º"><a href="#Part1-åŸºæœ¬æ­å»º" class="headerlink" title="Part1 åŸºæœ¬æ­å»º"></a>Part1 åŸºæœ¬æ­å»º</h3><ol>
<li>æ–°å»º iOS Project ï¼Œè¿™å°±ä¸ç”¨è¯´äº†å“ˆ</li>
<li>æ–°å»ºä¸€ä¸ª Target ï¼Œé€‰æ‹© Today-Extension ï¼ŒTargetåå­—å°±è®¾ç½®ä¸º TodayWidget</li>
<li>åœ¨ MainInterface.storyboard ç”» UI ï¼Œç„¶åè¿è¡Œå°±å¯ä»¥çœ‹åˆ°æ•ˆæœäº†ï¼Œç”±äºæˆ‘æ˜¯æ˜¾ç¤ºè¯¾ç¨‹ï¼Œå°±åœ¨é‡Œé¢æ·»åŠ äº†ä¸€ä¸ª UITableView ï¼Œå¹¶ä¸”å¢åŠ äº†ä¸¤ä¸ª Prototype Cell ç”¨äºè‡ªå®šä¹‰Cell</li>
</ol>
<h3 id="Part2-ä¾èµ–é¡¹ç›®å¼•å…¥"><a href="#Part2-ä¾èµ–é¡¹ç›®å¼•å…¥" class="headerlink" title="Part2 ä¾èµ–é¡¹ç›®å¼•å…¥"></a>Part2 ä¾èµ–é¡¹ç›®å¼•å…¥</h3><ol>
<li><p>åœ¨ Podfile é¡¹ç›®ä¸­æ–°å»ºä¸€ä¸ªtargetï¼Œå¹¶åŠ å…¥éœ€è¦å¼•å…¥çš„é¡¹ç›®ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
 <figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">target '<span class="type">TodayWidget'</span> <span class="keyword">do</span></div><div class="line">  pod '<span class="type">YYModel'</span></div><div class="line">end</div></pre></td></tr></table></figure>
</li>
<li><p>åœ¨ TodayWidget Target ä¸‹é¢æ–°å»ºä¸€ä¸ªæ¡¥æ¥å¤´æ–‡ä»¶ï¼Œè¿™é‡Œä¸ºçœå»è®¾ç½®çš„å¤´æ–‡ä»¶çš„æ–¹æ³•ï¼Œå¯ä»¥ç›´æ¥æ–°å»ºocæ–‡ä»¶ï¼Œxcodeä¼šé—®ä½ è¦ä¸è¦è‡ªåŠ¨æ·»åŠ ä¸€ä¸ªæ¡¥æ¥å¤´æ–‡ä»¶ï¼Œå»ºå¥½ä¹‹ååˆ é™¤ocæ–‡ä»¶å³å¯</p>
</li>
<li>æ¥ä¸‹æ¥åœ¨æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ„‰å¿«çš„é€šè¿‡ Cocoapods ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“äº†ï¼Œä½†æ˜¯æäº¤ä»£ç åˆ°AppStoreå°±ä¼šæŠ¥å¦‚ä¸‹çš„é”™è¯¯äº†ï¼š<br> <img src="http://7xqj7o.com1.z0.glb.clouddn.com/blog/Blog_Widgets_2" alt="ä¸Šä¼ æŠ¥é”™"></li>
<li><p>è§£å†³targetsä¸èƒ½ä½¿ç”¨Cocoapodsçš„æ–¹æ³•æ˜¯ï¼šåœ¨TodayWidget -&gt; Build Phases -&gt; New Run Script Phase ï¼Œå†æ·»åŠ å¦‚ä¸‹ä»£ç </p>
 <figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">cd <span class="string">"$&#123;CONFIGURATION_BUILD_DIR&#125;/$&#123;UNLOCALIZED_RESOURCES_FOLDER_PATH&#125;/"</span></div><div class="line"><span class="keyword">if</span> [[ -d <span class="string">"Frameworks"</span> ]]; then</div><div class="line">rm -fr <span class="type">Frameworks</span></div><div class="line">fi</div></pre></td></tr></table></figure>
</li>
<li><p>è¿™æ ·å°±å¯ä»¥é¡ºåˆ©æäº¤åˆ°AppStoreäº†</p>
</li>
</ol>
<h3 id="Part3-TodayExtension-Target-å’Œ-main-Target-ä¹‹é—´æ•°æ®å…±äº«"><a href="#Part3-TodayExtension-Target-å’Œ-main-Target-ä¹‹é—´æ•°æ®å…±äº«" class="headerlink" title="Part3 TodayExtension Target å’Œ main Target ä¹‹é—´æ•°æ®å…±äº«"></a>Part3 TodayExtension Target å’Œ main Target ä¹‹é—´æ•°æ®å…±äº«</h3><p>åœ¨è®²å¦‚ä½•å…·ä½“å®ç°æ•°æ®å…±äº«ä¹‹å‰ï¼Œéœ€è¦å…ˆæ‰“å¼€ä¸¤ä¸ªTarget -&gt; Capabilities -&gt; App Groupsï¼Œåªæœ‰åœ¨åŒä¸€ä¸ªGroupså†…çš„targetæ‰èƒ½å…±åŒè¯»å†™æ•°æ®ã€‚<br><img src="http://7xqj7o.com1.z0.glb.clouddn.com/blog/Blog_Widgets_3.png" alt="è®¾ç½®Group"><br>æœ‰ä¸¤ç§è§£å†³æ–¹å¼ï¼šUserDefaults å’Œ FileManager </p>
<h4 id="Solution1-UserDefaultsæ–¹å¼"><a href="#Solution1-UserDefaultsæ–¹å¼" class="headerlink" title="Solution1  UserDefaultsæ–¹å¼"></a>Solution1  UserDefaultsæ–¹å¼</h4><p>UserDefaults Apple å®˜æ–¹æ–‡æ¡£ï¼š</p>
<blockquote>
<p>The NSUserDefaults class provides a programmatic interface for interacting with the defaults system. The defaults system allows an application to customize its behavior to match a userâ€™s preferences. For example, you can allow users to determine what units of measurement your application displays or how often documents are automatically saved. Applications record such preferences by assigning values to a set of parameters in a userâ€™s defaults database. The parameters are referred to as defaults since theyâ€™re commonly used to determine an applicationâ€™s default state at startup or the way it acts by default.</p>
</blockquote>
<p>åœ¨æœ¬Appä¸­ï¼Œæˆ‘éœ€è¦å°†å½“å‰æ˜¯ç¬¬å‡ æ•™å­¦å‘¨åœ¨ targets é—´ä¼ é€’ï¼Œæ•°æ®é‡å¾ˆå°ï¼Œäºæ˜¯é‡‡ç”¨äº† UserDefaults æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š<br>    <figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// å†™å…¥</span></div><div class="line"><span class="type">UserDefaults</span>.<span class="keyword">init</span>(suiteName: <span class="string">"group.com.huangshuai.xxx"</span>)?.<span class="keyword">set</span>(week, forKey: <span class="string">"currentWeek"</span>)</div><div class="line"><span class="comment">// è¯»å–</span></div><div class="line"><span class="keyword">let</span> currentWeek = <span class="type">UserDefaults</span>.<span class="keyword">init</span>(suiteName: <span class="string">"group.com.huangshuai.xxx"</span>)?.object(forKey: <span class="string">"currentWeek"</span>) <span class="keyword">as</span>? <span class="type">Int</span> ?? <span class="number">1</span></div></pre></td></tr></table></figure></p>
<p>æ³¨ï¼šè¿™é‡Œæ˜¯ group é—´çš„ UserDefaults æ•°æ®å…±äº«ï¼Œè€Œä¸æ˜¯å¹³å¸¸çš„å•ä¸€targetä¸‹é¢çš„ UserDefaults ä½¿ç”¨ï¼š<br>    <figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// å†™å…¥</span></div><div class="line"><span class="type">UserDefaults</span>.standard.<span class="keyword">set</span>(<span class="literal">false</span>, forKey: <span class="string">"isFirstLaunch"</span>)</div><div class="line"><span class="comment">// è¯»å–</span></div><div class="line"><span class="keyword">let</span> isFirstLaunch = <span class="type">UserDefaults</span>.standard.object(forKey: <span class="string">"isFirstLaunch"</span>) <span class="keyword">as</span>? <span class="type">Bool</span> ?? <span class="literal">true</span></div></pre></td></tr></table></figure></p>
<h4 id="Solution2-FileManageræ–¹å¼"><a href="#Solution2-FileManageræ–¹å¼" class="headerlink" title="Solution2  FileManageræ–¹å¼"></a>Solution2  FileManageræ–¹å¼</h4><p>FileManager Apple å®˜æ–¹æ–‡æ¡£ï¼š</p>
<blockquote>
<p>An FileManager object lets you examine the contents of the file system and make changes to it. The FileManager class provides convenient access to a shared file manager object that is suitable for most types of file-related manipulations. A file manager object is typically your primary mode of interaction with the file system. You use it to locate, create, copy, and move files and directories. You also use it to get information about a file or directory or change some of its attributes.</p>
</blockquote>
<p>åœ¨æœ¬Appä¸­ï¼Œæˆ‘éœ€è¦å°†æ‰€æœ‰çš„è¯¾è¡¨æ•°æ®åœ¨ targets é—´ä¼ é€’ï¼Œæ•°æ®é‡è¾ƒå¤§ï¼Œäºæ˜¯é‡‡ç”¨äº† FileManager æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> name = <span class="string">"course.plist"</span></div><div class="line"><span class="keyword">let</span> groupPath = <span class="type">FileManager</span>.<span class="keyword">default</span>.containerURL(forSecurityApplicationGroupIdentifier: <span class="string">"group.com.huangshuai.xxx"</span>)</div><div class="line"><span class="keyword">let</span> groupPathString = groupPath!.absoluteString.replacingOccurrences(of:<span class="string">"file:///private"</span>, with: <span class="string">""</span>).replacingOccurrences(of:<span class="string">"file:///"</span>, with: <span class="string">""</span>)</div><div class="line">destPath = (groupPathString <span class="keyword">as</span> <span class="type">NSString</span>).appendingPathComponent(name).characters.<span class="built_in">split</span>&#123;$<span class="number">0</span> == <span class="string">"."</span>&#125;.<span class="built_in">map</span>(<span class="type">String</span>.<span class="keyword">init</span>).first!</div><div class="line"><span class="comment">// å†™å…¥</span></div><div class="line"><span class="keyword">let</span> dic = [:] <span class="keyword">as</span> <span class="type">NSDictionary</span></div><div class="line">dic.write(toFile: destPath, atomically: <span class="literal">true</span>)</div><div class="line"><span class="comment">// è¯»å–</span></div><div class="line"><span class="keyword">let</span> dict = <span class="type">NSDictionary</span>(contentsOfFile: destPath)</div></pre></td></tr></table></figure>
<h3 id="Part4-é€‚é…-iOS10-Widgets-æ–°ç‰¹æ€§"><a href="#Part4-é€‚é…-iOS10-Widgets-æ–°ç‰¹æ€§" class="headerlink" title="Part4 é€‚é… iOS10 Widgets æ–°ç‰¹æ€§"></a>Part4 é€‚é… iOS10 Widgets æ–°ç‰¹æ€§</h3><h4 id="å¤„ç†-Widgets-å±•å¼€-æŠ˜å çš„æƒ…å†µ"><a href="#å¤„ç†-Widgets-å±•å¼€-æŠ˜å çš„æƒ…å†µ" class="headerlink" title="å¤„ç† Widgets å±•å¼€/æŠ˜å çš„æƒ…å†µ"></a>å¤„ç† Widgets å±•å¼€/æŠ˜å çš„æƒ…å†µ</h4><p>åœ¨ iOS10 ä¹‹å‰ï¼ŒWidgets çš„é«˜åº¦å¯ä»¥è‡ªå®šä¹‰è®¾ç½®ï¼Œä½†æ˜¯åœ¨ iOS10 ä¸­ï¼ŒWidgets çš„ activeDisplayMode æœ‰ä¸¤ç§çŠ¶æ€ï¼š.expanded å’Œ .compactã€‚ éœ€è¦æ ¹æ®å½“å‰ç”¨æˆ·çš„é€‰æ‹©æ¥å¤„ç† Widgets çš„é«˜åº¦ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@available</span>(iOSApplicationExtension <span class="number">10.0</span>, *)</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">widgetActiveDisplayModeDidChange</span><span class="params">(<span class="number">_</span> activeDisplayMode: NCWidgetDisplayMode, withMaximumSize maxSize: CGSize)</span></span> &#123;</div><div class="line">    <span class="keyword">if</span> activeDisplayMode == .compact &#123;</div><div class="line">        <span class="keyword">self</span>.preferredContentSize = maxSize</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="keyword">self</span>.preferredContentSize = <span class="keyword">self</span>.tableView.contentSize</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™é‡Œæœ‰ä¸ªBugï¼šå°±æ˜¯åœ¨ .compact ä¸‹æ— æ³•è®¾ç½®å°ºå¯¸ï¼Œä¸ç®¡æ€ä¹ˆè®¾ç½®éƒ½æ˜¯ maxsizeã€‚è¿˜æœ‰å¾…è§£å†³ã€‚</p>
<h4 id="å¤„ç†-Widgets-åœ¨-iOS9-å’Œ-iOS10-ä¸‹çš„æ˜¾ç¤º-Bug"><a href="#å¤„ç†-Widgets-åœ¨-iOS9-å’Œ-iOS10-ä¸‹çš„æ˜¾ç¤º-Bug" class="headerlink" title="å¤„ç† Widgets åœ¨ iOS9 å’Œ iOS10 ä¸‹çš„æ˜¾ç¤º Bug"></a>å¤„ç† Widgets åœ¨ iOS9 å’Œ iOS10 ä¸‹çš„æ˜¾ç¤º Bug</h4><p>åœ¨ iOS10 ä¸­ï¼ŒWidgets çš„èƒŒæ™¯æ˜¯ç™½è‰²çš„ï¼Œäºæ˜¯å­—ä½“é¢œè‰²è®¾ç½®ä¸ºé»‘è‰²çš„ï¼Œä½†æ˜¯åœ¨ iOS9 ä¸­ï¼ŒèƒŒæ™¯æ˜¯é»‘è‰²çš„ï¼ŒApp åœ¨iOS9ä¸­è¿è¡Œå°±ä¼šçœ‹ä¸è§å­—ã€‚æ„Ÿè§‰è¿™æ˜¯iOS10é€‚é…çš„Bugï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåªèƒ½é€šè¿‡åˆ¤æ–­ç³»ç»Ÿç‰ˆæœ¬æ¥è®¾ç½®å­—ä½“é¢œè‰²äº†ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> #available(iOSApplicationExtension <span class="number">10.0</span>, *) &#123;</div><div class="line">    mainTextColor = <span class="type">UIColor</span>.black</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    mainTextColor = <span class="type">UIColor</span>.white</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="Bug"><a href="#Bug" class="headerlink" title="Bug:"></a>Bug:</h4><p>åœ¨ iOS10 ä¸‹ï¼ŒWidgets çš„ displayBundleName è®¾ç½®ä¹Ÿä¸èµ·ä½œç”¨äº†ï¼Œä¸ç®¡æ€ä¹ˆè®¾ç½®åªè·Ÿ mainTarget çš„displayBundleName ä¸€è‡´ï¼Œè¿˜æœªæ‰¾åˆ°è§£å†³æ–¹æ³•ã€‚</p>
<h2 id="ç•ªå¤–ç¯‡"><a href="#ç•ªå¤–ç¯‡" class="headerlink" title="ç•ªå¤–ç¯‡"></a>ç•ªå¤–ç¯‡</h2><p>å¥³ç¥¨è¯´å¥¹ä»¬å­¦æ ¡è¯¾ç¨‹å¾ˆå¤šï¼Œæ¯å¤©çœ‹è¯¾è¡¨ä¸æ–¹ä¾¿ï¼Œåœ¨å›½åº†èŠ‚é™ªå¥¹è¿‡ç”Ÿæ—¥çš„æ—¶å€™ï¼Œç°åœºæ’¸äº†ä¸€ä¸ªAppåªä¾›å¥¹ä½¿ç”¨ï¼Œå¥¹æ¯æ¬¡ä¸ç”¨è§£é”ç›´æ¥ä¸‹æ‹‰Widgetså°±å¯ä»¥çœ‹åˆ°ä»Šæ—¥è¯¾ç¨‹ï¼Œå¥¹å¼€å¿ƒçš„ä¸å¾—äº†è¿˜å‘äº†æœ‹å‹åœˆç‚«è€€ä¸€ç•ªã€‚å“ˆå“ˆï¼Œå¥³ç¥¨æ˜¯ç¬¬ä¸€ç”Ÿäº§åŠ›â˜ºï¸</p>
<p>è¯´åˆ°è¿™ï¼Œæœ¬æ–‡ä¹Ÿå°±ç»“æŸäº†ï¼Œä»¥ä¸Šæåˆ°çš„Bugï¼Œæˆ‘ä¼šåœ¨è§£å†³ä¹‹åå†æ¥æ›´æ–°ä»£ç ã€‚</p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        
  <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
    <div>åšæŒåŸåˆ›æŠ€æœ¯åˆ†äº«ï¼Œæ‚¨çš„æ”¯æŒå°†é¼“åŠ±æˆ‘ç»§ç»­åˆ›ä½œï¼</div>
    <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
      <span>èµ</span>
    </button>
    <div id="QR" style="display: none;">
      
        <div id="wechat" style="display: inline-block">
          <img id="wechat_qr" src="/uploads/wechat-reward-image.JPG" alt="é»„å¸… WeChat Pay"/>
          <p>å¾®ä¿¡æ‰“èµ</p>
        </div>
      
      
        <div id="alipay" style="display: inline-block">
          <img id="alipay_qr" src="/uploads/alipay-reward-image.JPG" alt="é»„å¸… Alipay"/>
          <p>æ”¯ä»˜å®æ‰“èµ</p>
        </div>
      
    </div>
  </div>


      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Swift/" rel="tag">#Swift</a>
          
            <a href="/tags/Alamofire/" rel="tag">#Alamofire</a>
          
            <a href="/tags/Today-Extension/" rel="tag">#Today-Extension</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/10/08/Swift3-è¿ç§»å°ç»“/" rel="next" title="Swift3 è¿ç§»å°ç»“">
                <i class="fa fa-chevron-left"></i> Swift3 è¿ç§»å°ç»“
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/12/29/é˜¿é‡Œç™¾å·ç”¨æˆ·åé¦ˆSwiftå¼€å‘å°ç»“/" rel="prev" title="é˜¿é‡Œç™¾å·ç”¨æˆ·åé¦ˆSwiftå¼€å‘å°ç»“">
                é˜¿é‡Œç™¾å·ç”¨æˆ·åé¦ˆSwiftå¼€å‘å°ç»“ <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2016/10/11/iOS10-Today-Extension-å¼€å‘å°ç»“/"
           data-title="iOS10 Today Extension å¼€å‘å°ç»“ " data-url="https://huangshuai-iot.github.io/2016/10/11/iOS10-Today-Extension-å¼€å‘å°ç»“/">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            æ–‡ç« ç›®å½•
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            ç«™ç‚¹æ¦‚è§ˆ
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/avatar-hus.jpg"
               alt="é»„å¸…" />
          <p class="site-author-name" itemprop="name">é»„å¸…</p>
          <p class="site-description motion-element" itemprop="description">è¯´æˆ‘èƒ½åšçš„ï¼Œåšæˆ‘è¯´è¿‡çš„ã€‚</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">12</span>
              <span class="site-state-item-name">æ—¥å¿—</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">åˆ†ç±»</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">22</span>
                <span class="site-state-item-name">æ ‡ç­¾</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/u/2189929640" target="_blank" title="å¾®åš">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  å¾®åš
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://github.com/huangshuai-IOT" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              å‹æƒ…é“¾æ¥
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="https://yuhaomin.github.io" title="å¥³ç¥¨çš„åšå®¢ğŸ˜˜" target="_blank">å¥³ç¥¨çš„åšå®¢ğŸ˜˜</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://52chat.cc/" title="æ¾å“¥çš„è®ºå›" target="_blank">æ¾å“¥çš„è®ºå›</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://eliyar.biz/" title="Eliyar's Blog" target="_blank">Eliyar's Blog</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://swifter.tips/" title="Swifter Tips" target="_blank">Swifter Tips</a>
                </li>
              
            </ul>
          </div>
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#èƒŒæ™¯"><span class="nav-number">1.</span> <span class="nav-text">èƒŒæ™¯</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æ­¥éª¤"><span class="nav-number">2.</span> <span class="nav-text">æ­¥éª¤</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Part1-åŸºæœ¬æ­å»º"><span class="nav-number">2.1.</span> <span class="nav-text">Part1 åŸºæœ¬æ­å»º</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Part2-ä¾èµ–é¡¹ç›®å¼•å…¥"><span class="nav-number">2.2.</span> <span class="nav-text">Part2 ä¾èµ–é¡¹ç›®å¼•å…¥</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Part3-TodayExtension-Target-å’Œ-main-Target-ä¹‹é—´æ•°æ®å…±äº«"><span class="nav-number">2.3.</span> <span class="nav-text">Part3 TodayExtension Target å’Œ main Target ä¹‹é—´æ•°æ®å…±äº«</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Solution1-UserDefaultsæ–¹å¼"><span class="nav-number">2.3.1.</span> <span class="nav-text">Solution1  UserDefaultsæ–¹å¼</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Solution2-FileManageræ–¹å¼"><span class="nav-number">2.3.2.</span> <span class="nav-text">Solution2  FileManageræ–¹å¼</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Part4-é€‚é…-iOS10-Widgets-æ–°ç‰¹æ€§"><span class="nav-number">2.4.</span> <span class="nav-text">Part4 é€‚é… iOS10 Widgets æ–°ç‰¹æ€§</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#å¤„ç†-Widgets-å±•å¼€-æŠ˜å çš„æƒ…å†µ"><span class="nav-number">2.4.1.</span> <span class="nav-text">å¤„ç† Widgets å±•å¼€/æŠ˜å çš„æƒ…å†µ</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#å¤„ç†-Widgets-åœ¨-iOS9-å’Œ-iOS10-ä¸‹çš„æ˜¾ç¤º-Bug"><span class="nav-number">2.4.2.</span> <span class="nav-text">å¤„ç† Widgets åœ¨ iOS9 å’Œ iOS10 ä¸‹çš„æ˜¾ç¤º Bug</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Bug"><span class="nav-number">2.4.3.</span> <span class="nav-text">Bug:</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ç•ªå¤–ç¯‡"><span class="nav-number">3.</span> <span class="nav-text">ç•ªå¤–ç¯‡</span></a></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2015 - 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">é»„å¸…</span>
</div>

<div class="powered-by">
  ç”± <a class="theme-link" href="http://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨
</div>

<div class="theme-info">
  ä¸»é¢˜ -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>

<div>
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1259995403'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s95.cnzz.com/z_stat.php%3Fid%3D1259995403%26online%3D1%26show%3Dline' type='text/javascript'%3E%3C/script%3E"));</script>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"huangshuai-iot"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    <script src="/vendors/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  






  
  

  

  

  

</body>
</html>
